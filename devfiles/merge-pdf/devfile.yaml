# Generated by chectl (see https://github.com/che-incubator/chectl):
# chectl devfile:generate --name=expenses --dockerimage=sunix/mergepdf --command="pdftk *.pdf cat output large.pdf && pdf2ps large.pdf very_large.ps && ps2pdf very_large.ps final.pdf && rm large.pdf very_large.ps"
apiVersion: 1.0.0
metadata:
  generateName: merge-pdf-
components:
  - alias: sunix-mergepdf
    type: dockerimage
    image: quay.io/sunix/mergepdf
    memoryLimit: 512M
    mountSources: true
    args:
      - tail
      - '-f'
      - /dev/null
commands:
  - name: Merge PDF files
    actions:
      - type: exec
        command: >-
          set -o xtrace;
          pdftk *.pdf cat output large.pdf && pdf2ps large.pdf
          very_large.ps && ps2pdf very_large.ps final.pdf && rm large.pdf
          very_large.ps && echo Done!
        component: sunix-mergepdf
        workdir: /projects/
  - name: Convert images to PDF
    actions:
      - type: exec
        command: >-
          set -o xtrace;
          for jpgfile in $(ls *.*g); do convert "$jpgfile"  "$jpgfile".pdf; done
          && echo Done!
        component: sunix-mergepdf
        workdir: /projects/

